webpackJsonp([24],{"0myv":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("hxP8"),a=s("kxUj"),r={data:function(){return{userPhone:"",valideCode:"",password:"",errorText:"请输入正确的手机号",valideText:"请输入正确的验证码",passwordText:"密码格式不能少于6位",userShow:!1,bStop:!0,valideError:!1,passCheck:!1,getCodeShow:!1,codeText:"获取验证码"}},computed:{},components:{homeHeader:o.a,submitBtn:a.a},methods:{checkName:function(e){var t=this;/^1[3|4|5|7|8][0-9]{9}$/.test(e)?t.ajax({url:"/member/register/check?username="+t.userPhone,success:function(e){1e3==e.status?(t.getCodeShow=!0,t.userShow=!0,t.errorText="用户未注册"):(t.userShow=!1,t.getCodeShow=!1,t.valideError=!1,t.errorText="请输入正确的手机号")}}):(t.userShow=!0,t.getCodeShow=!0,t.valideError=!1,t.errorText="请输入正确的手机号",t.valideCode="")},getCode:function(){var e=this,t=60;if(!e.getCodeShow&&e.userPhone&&e.bStop){var s=setInterval(function(){t--,e.codeText=t+"后重新发送",t<=0&&(clearInterval(s),e.codeText="获取验证码",e.getCodeShow=!1,e.bStop=!0)},1e3);e.ajax({url:"/member/sms",method:"post",data:{username:e.userPhone},success:function(e){"0"==e.status&&console.log("获取手机验证码成功")}}),e.bStop=!1,e.getCodeShow=!0}else!e.getCodeShow&&e.bStop?e.getCodeShow=!1:e.getCodeShow=!0},checkValide:function(e){if(!this.userShow&&this.userPhone)return 6==e.length?(this.valideError=!1,this.valideError):(this.valideError=!0,this.valideText="请输入正确的验证码",this.valideError)},checkVade:function(e){var t=this;6==e.length&&t.ajax({url:"/member/check/code",method:"post",data:{username:t.userPhone,code:t.valideCode},success:function(e){1e3==e.status?t.valideError=!1:(t.valideError=!0,t.valideText=e.msg)}})},checkPassword:function(e){if(!this.valideError)return e.length>=6&&e.length<=20?(this.passCheck=!1,/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{5,19}$/.test(e)?this.passCheck=!1:(this.passCheck=!0,this.passwordText="密码必须是字母数字组合"),this.passCheck):(this.passCheck=!0,this.passwordText="密码不能少于6位",this.passCheck)},forgetPwd:function(){var e=this;!e.passCheck&&e.password&&e.ajax({url:"/member/reset/password",method:"post",data:{username:e.userPhone,code:e.valideCode,password:e.password},success:function(t){1e3==t.status?e.$router.go(-1):(e.passCheck=!0,e.passwordText=t.msg)}})}},mounted:function(){}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"left",attrs:{id:"forgetPwd"}},[s("home-header",{attrs:{title:"忘记密码",back:!0}}),e._v(" "),s("main",{staticClass:"login-main"},[s("div",{staticClass:"login-input login-tel"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"login-tel-input",attrs:{type:"number","max-length":"11",placeholder:"请输入手机号"},domProps:{value:e.userPhone},on:{input:[function(t){t.target.composing||(e.userPhone=t.target.value)},function(t){e.checkName(e.userPhone)}]}})]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:this.userShow,expression:"this.userShow"}],staticClass:"warnShow"},[e._v(e._s(this.errorText))]),e._v(" "),s("div",{staticClass:"login-input tel-code"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.valideCode,expression:"valideCode"}],staticClass:"login-tel-input",attrs:{type:"number",placeholder:"请输入短信验证"},domProps:{value:e.valideCode},on:{input:[function(t){t.target.composing||(e.valideCode=t.target.value)},function(t){e.checkValide(e.valideCode)}],blur:function(t){e.checkVade(e.valideCode)}}}),e._v(" "),s("div",{staticClass:"login-get-code",on:{click:e.getCode}},[s("submit-btn",{attrs:{min:!0,title:e.codeText,grey:e.getCodeShow}})],1)]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.valideError,expression:"valideError"}],staticClass:"codeWarn"},[e._v(e._s(this.valideText))]),e._v(" "),s("div",{staticClass:"login-input login-pwd"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login-tel-input",attrs:{type:"password",placeholder:"请设置6-20位包含数字和字母密码"},domProps:{value:e.password},on:{input:[function(t){t.target.composing||(e.password=t.target.value)},function(t){e.checkPassword(e.password)}]}}),e._v(" "),s("div",{staticClass:"login-input-show iconfont icon-yanjing"}),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:this.passCheck,expression:"this.passCheck"}],staticClass:"codeWarn"},[e._v(e._s(this.passwordText))])]),e._v(" "),s("submit-btn",{attrs:{min:!0,title:"确定"},nativeOn:{click:function(t){e.forgetPwd()}}})],1)],1)},staticRenderFns:[]};var n=s("VU/8")(r,i,!1,function(e){s("8nAs")},"data-v-18710f2c",null);t.default=n.exports},"8nAs":function(e,t){}});
//# sourceMappingURL=24.d15613115cee00ee7916.js.map