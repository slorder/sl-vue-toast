webpackJsonp([20],{"GL/r":function(e,t){},NWEO:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("hxP8"),a=o("kxUj"),i={data:function(){return{userPhone:"",valideCode:"",errorText:"请输入正确的手机号",valideText:"请输入正确的验证码",userShow:!1,valideError:!1,getCodeShow:!1,bStop:!0,codeText:"获取验证码"}},computed:{},components:{homeHeader:s.a,submitBtn:a.a},methods:{checkName:function(e){var t=this;/^1[3|4|5|7|8][0-9]{9}$/.test(e)?t.ajax({url:"/member/register/check?username="+t.userPhone,success:function(e){1e3==e.status?(t.userShow=!0,t.bStop=!1,t.getCodeShow=!0,t.errorText="用户未注册"):(t.userShow=!1,t.bStop=!0,t.getCodeShow=!1,console.log("用户已经注册"))}}):(t.getCodeShow=!0,t.userShow=!0,t.valideError=!1,t.errorText="请输入正确的手机号",t.valideCode="")},getCode:function(){var e=this,t=60;if(!e.getCodeShow&&e.userPhone&&e.bStop){var o=setInterval(function(){t--,e.codeText=t+"后重新发送",t<=0&&(clearInterval(o),e.codeText="获取验证码",e.getCodeShow=!1,e.bStop=!0)},1e3);e.ajax({url:"/member/sms",method:"post",data:{username:e.userPhone},success:function(e){1e3==e.status?console.log("获取手机验证码成功"):console.log("用户已经注册")}}),e.bStop=!1,e.getCodeShow=!0}else!e.getCodeShow&&e.bStop?e.getCodeShow=!1:e.getCodeShow=!0},checkValide:function(e){!this.userShow&&this.userPhone&&(6==e.length?this.valideError=!1:(this.valideError=!0,this.valideText="请输入正确的验证码"))},checkVade:function(e){var t=this;6==e.length&&t.ajax({url:"/member/check/code",method:"post",data:{username:t.userPhone,code:t.valideCode},success:function(e){1e3==e.status?console.log("验证码一致"):(t.valideError=!0,t.valideText=e.msg)}})},login:function(){var e=this;!this.valideError&&this.valideCode&&e.ajax({url:"/member/login/code",method:"post",data:{username:e.userPhone,code:e.valideCode,memberId:window.sessionStorage.getItem("tempMemberId")?window.sessionStorage.getItem("tempMemberId"):null},success:function(t){1e3==t.status?(window.localStorage.setItem("memberId",t.data.id),window.localStorage.setItem("username",e.userPhone),window.sessionStorage.removeItem("tempMemberId"),e.$route.query.goto?e.$router.push({name:e.$route.query.goto}):e.$router.push({name:"me"})):(e.valideError=!0,e.valideText=t.status)}})}},mounted:function(){}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"left",attrs:{id:"login"}},[o("home-header",{attrs:{title:"手机验证码登录",back:!0}}),e._v(" "),o("main",{staticClass:"login-main"},[o("div",{staticClass:"login-input login-tel"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"login-tel-input",attrs:{type:"number",placeholder:"请输入手机号"},domProps:{value:e.userPhone},on:{input:[function(t){t.target.composing||(e.userPhone=t.target.value)},function(t){e.checkName(e.userPhone)}]}})]),e._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:this.userShow,expression:"this.userShow"}],staticClass:"warnShow"},[e._v(e._s(this.errorText))]),e._v(" "),o("div",{staticClass:"login-input tel-code"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.valideCode,expression:"valideCode"}],staticClass:"login-tel-input",attrs:{type:"number",placeholder:"请输入短信验证"},domProps:{value:e.valideCode},on:{input:[function(t){t.target.composing||(e.valideCode=t.target.value)},function(t){e.checkValide(e.valideCode)}],blur:function(t){e.checkVade(e.valideCode)}}}),e._v(" "),o("div",{staticClass:"login-get-code",on:{click:e.getCode}},[o("submit-btn",{attrs:{min:!0,title:e.codeText,grey:e.getCodeShow}})],1)]),e._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:e.valideError,expression:"valideError"}],staticClass:"codeWarn"},[e._v(e._s(this.valideText))]),e._v(" "),o("submit-btn",{staticClass:"loginBtn",attrs:{min:!0,title:"登录"},nativeOn:{click:function(t){e.login()}}}),e._v(" "),o("div",{staticClass:"btnType"},[o("div",{staticClass:"pwd-login",on:{click:function(t){e.bindPathName("pwdlogin")}}},[e._v("密码登录")]),e._v(" "),o("div",{staticClass:"pwd-login"},[o("span",{on:{click:function(t){e.$router.push({path:"/forgetPwd"})}}},[e._v("忘记密码？")]),o("span",{on:{click:function(t){e.bindPathName("register")}}},[e._v("注册")])])])],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,n,!1,function(e){o("GL/r")},"data-v-35f3b1c9",null);t.default=r.exports}});
//# sourceMappingURL=20.9354c672413104d520f8.js.map