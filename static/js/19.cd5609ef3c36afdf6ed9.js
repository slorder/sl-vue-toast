webpackJsonp([19],{ZFm6:function(t,a){},hAxH:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={data:function(){return{bindCard:null,payPopupShow:!1,addActive:!1,bankList:[],bankNum:"",bankType:"",orderNo:"",bindId:"",bankCode:"",id:"",info:null}},computed:{},components:{homeHeader:s("hxP8").a},watch:{payPopupShow:function(t){t||(this.addActive=!1)}},created:function(){this.waitPay()},methods:{waitPay:function(){var t=this,a=window.localStorage.getItem("memberId");t.id=t.$route.query.orderNumber,t.ajax({url:"/order/showOrder",method:"post",data:{memberId:a,orderId:t.id},success:function(a){1e3==a.status&&(t.info=a.data[0],console.log(t.info.shippingDto),console.log(t.info.ordersDetailList))}})},submitOrder:function(){var t=this;t.payPopupShow=!0,t.ajax({url:"/pay/cardlist",method:"post",success:function(a){console.log(a.data.code);var s=a.data.code,i=a.data.cardList;console.log(s),"1"==s?(t.bindCard=2,t.bankType=i[0].bankName,t.bankNum=i[0].cardNo,t.bindId=i[0].bindId,t.bankCode=i[0].bankCode,t.bankList=i):t.bindCard=1}})},bindBankCard:function(){this.ajax({url:"/pay/authUser?returnUrl=http://localhost:8080/createOrder",method:"post",success:function(t){var a=t.data.code;console.log(a);var s=t.data.redirectUrl;console.log(s),1==a&&(window.location.href=s)}})},rightPay:function(){this.ajax({url:"/pay/consume?bindCardId="+this.bindId+"&bankCode="+this.bankCode+"&id="+this.orderNo+"&webCallbackUrl=http://localhost:8080/result&payment=0.1&paymentActual=0.1",method:"post",success:function(t){var a=t.data.code,s=t.data.redirectUrl;1==a&&(window.location.href=s)}})}},mounted:function(){}},e={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"pay left"},[i("home-header",{attrs:{title:"待付款",back:!0}}),t._v(" "),i("div",{staticClass:"pay-main"},[i("div",{staticClass:"create-item create-main-address"},[i("div",{staticClass:"create-item-title"},[t._v("\n        收货地址：\n      ")]),t._v(" "),i("div",{staticClass:"create-address"},[i("div",{staticClass:"create-address-name"},[i("p",[t._v("收货人："+t._s(t.info.shippingDto.receiverName))]),t._v(" "),i("p",[t._v("手机："+t._s(t.info.shippingDto.receiverMobile))])]),t._v(" "),i("div",{staticClass:"create-address-content"},[t._v("\n          "+t._s(t.info.shippingDto.receiverProvince)+"省"+t._s(t.info.shippingDto.receiverCity)+t._s(t.info.shippingDto.receiverDistrict)+t._s(t.info.shippingDto.receiverAddress)+"\n        ")])])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"pay-item pay-main-message"},[t._v("订单附言")]),t._v(" "),i("p",{staticClass:"ReceiveWrite"},[t._v(t._s(t.info.remark))]),t._v(" "),i("div",{staticClass:"pay-item pay-main-product"},[i("div",{staticClass:"pay-product-title"},[t._v("\n        商品列表\n      ")]),t._v(" "),i("div",{staticClass:"pay-product-item"},t._l(t.info.ordersDetailList,function(a,s){return i("div",{key:s,staticClass:"pay-product-list"},[i("div",{staticClass:"pay-product-image"},[i("img",{attrs:{src:t.imgHost+a.productImage,alt:""}})]),t._v(" "),i("div",{staticClass:"pay-product-content"},[i("div",{staticClass:"pay-product-name ellipsis"},[t._v("\n              "+t._s(a.productName)+"\n            ")]),t._v(" "),i("div",{staticClass:"pay-product-count"},[t._v("\n              数量："+t._s(a.productAmount)+"\n            ")]),t._v(" "),i("div",{staticClass:"pay-product-money"},[t._v("\n              价格："),i("span",[t._v("￥"+t._s(a.productPrice)+".00元")])])])])})),t._v(" "),i("div",{staticClass:"pay-product-collect"},[i("p",[t._v("商品总价："),i("span",[t._v("￥"+t._s(t.info.payment)+".00元")])]),t._v(" "),t._m(1),t._v(" "),i("p",[t._v("应付费用："),i("span",[t._v("￥"+t._s(t.info.payment)+".00元")])])])]),t._v(" "),i("div",{staticClass:"pay-main-btn"},[i("span",{on:{click:t.submitOrder}},[t._v("订单提交")])])]),t._v(" "),i("mt-popup",{staticClass:"pay-mt-popup",attrs:{position:"bottom"},model:{value:t.payPopupShow,callback:function(a){t.payPopupShow=a},expression:"payPopupShow"}},[i("div",{staticClass:"pay-popup"},[i("div",{staticClass:"pay-title"},[i("div",{staticClass:"pay-title-cancel",on:{click:function(a){t.payPopupShow=!1}}},[t._v("\n          取消\n        ")]),t._v("\n        确认付款\n      ")]),t._v(" "),i("div",{staticClass:"pay-content"},[i("div",{staticClass:"pay-money"},[i("div",{staticClass:"pay-money-val"},[t._v("￥"+t._s(t.info.payment)+".00")]),t._v(" "),i("div",{staticClass:"pay-money-refer"},[t._v("￥0")])]),t._v(" "),i("div",{staticClass:"pay-price"},[i("div",{staticClass:"pay-price-title"},[t._v("优惠金额")]),t._v(" "),i("div",{staticClass:"pay-price-count"},[t._v("￥0")])]),t._v(" "),i("div",{staticClass:"pay-type"},[i("div",{staticClass:"pay-type-title"},[t._v("付款方式")]),t._v(" "),1==t.bindCard?i("div",{staticClass:"pay-type-content1",on:{click:function(a){t.bindBankCard()}}},[i("span",[t._v("您还没有绑定银行卡")]),i("i",{staticClass:"iconfont icon-arrow-right-copy"})]):t._e(),t._v(" "),2==t.bindCard?i("div",{staticClass:"pay-type-content",on:{click:function(a){t.addActive=!0}}},[i("div",{staticClass:"pay-type-img"},[i("img",{attrs:{src:s("tyII"),alt:""}})]),t._v(" "),i("div",{staticClass:"pay-type-right"},[i("div",{staticClass:"type-right-title"},[t._v("\n                "+t._s(t.bankNum)+"\n              ")]),t._v(" "),i("div",{staticClass:"type-right-num"},[t._v("\n                "+t._s(t.bankType)+"\n              ")])])]):t._e()]),t._v(" "),i("div",{staticClass:"pay-type-button"},[i("div",{staticClass:"pay-type-btn",on:{click:function(a){t.rightPay()}}},[t._v("确认支付")])]),t._v(" "),i("div",{staticClass:"pay-type-notice"},[t._v("\n          支持银行卡支付\n        ")])])]),t._v(" "),i("div",{staticClass:"pay-popup popup-add-pay",class:t.addActive?"moveLeft":"moveRight"},[i("div",{staticClass:"pay-title"},[i("div",{staticClass:"pay-title-cancel",on:{click:function(a){t.addActive=!1}}},[t._v("\n          返回\n        ")]),t._v("\n        选择付款方式\n      ")]),t._v(" "),i("div",{staticClass:"pay-content"},[i("div",{staticClass:"pay-type"},t._l(t.bankList,function(a){return i("div",{staticClass:"pay-type-content"},[i("div",{staticClass:"pay-type-img"},[i("img",{attrs:{src:s("tyII"),alt:""}})]),t._v(" "),i("div",{staticClass:"pay-type-right"},[i("div",{staticClass:"type-right-title"},[t._v("\n                "+t._s(a.cardNo)+"\n              ")]),t._v(" "),i("div",{staticClass:"type-right-num"},[t._v("\n                "+t._s(a.bankName)+"\n              ")])])])}))]),t._v(" "),i("div",{staticClass:"pay-add-code"},[t._v("\n        使用新卡支付\n      ")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"pay-item pay-main-pay"},[a("span",[this._v("支付方式")]),this._v(" "),a("span",[this._v("易宝支付")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("快递费："),a("span",[this._v("￥元")])])}]};var n=s("VU/8")(i,e,!1,function(t){s("ZFm6")},"data-v-3b3c6fca",null);a.default=n.exports}});
//# sourceMappingURL=19.cd5609ef3c36afdf6ed9.js.map